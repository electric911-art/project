<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Create Account ‚Äì Reyn Tech</title>
<style>
  body{
    margin:0;
    font-family:'Segoe UI',Tahoma,Geneva,Verdana,sans-serif;
    background:#0a0a0a;
    color:#fff;
    display:flex;
    justify-content:center;
    align-items:center;
    min-height:100vh;
    padding:20px;
  }
  .container{
    background:#111;
    padding:25px 30px;
    border-radius:16px;
    box-shadow:0 0 20px rgba(255,0,0,.6);
    width:100%;
    max-width:420px;
    animation:fadeIn .5s ease;
  }
  h2{
    text-align:center;
    color:#ff073a;
    text-shadow:0 0 10px #ff073a;
    margin-bottom:8px;
  }
  label{
    display:block;
    margin-bottom:6px;
    font-weight:bold;
    color:#ccc;
  }
  input{
    width:100%;
    padding:12px;
    margin-bottom:16px;
    border:2px solid #ff073a;
    border-radius:10px;
    background:#000;
    color:#fff;
    font-size:15px;
    outline:none;
    transition:.3s;
    box-sizing:border-box;
  }
  input:focus{
    box-shadow:0 0 12px #ff073a;
  }
  button{
    width:100%;
    background:#ff073a;
    color:#fff;
    border:none;
    padding:14px;
    border-radius:12px;
    font-size:17px;
    cursor:pointer;
    box-shadow:0 0 12px #ff073a;
    transition:.3s;
  }
  button:hover{
    background:#ff304f;
    box-shadow:0 0 20px #ff073a;
  }
  .accounts-list{
    margin-top:20px;
    max-height:400px;
    overflow-y:auto;
  }
  .account-item{
    background:#1c1c1c;
    border:1px solid #ff073a;
    border-radius:8px;
    padding:12px;
    margin-bottom:10px;
  }
  .account-item.expired{
    border-color:#666;
    background:#0f0f0f;
    opacity:0.7;
  }
  .account-header{
    display:flex;
    justify-content:space-between;
    align-items:center;
    margin-bottom:8px;
  }
  .account-info{
    flex:1;
  }
  .status{
    padding:4px 8px;
    border-radius:4px;
    font-size:12px;
    font-weight:bold;
    margin-left:10px;
  }
  .status.active{
    background:#28a745;
    color:#fff;
  }
  .status.expired{
    background:#dc3545;
    color:#fff;
  }
  .extend-btn{
    background:#28a745;
    color:#fff;
    border:none;
    padding:6px 10px;
    border-radius:4px;
    cursor:pointer;
    font-size:12px;
    margin-right:5px;
  }
  .delete-btn{
    background:#dc3545;
    color:#fff;
    border:none;
    padding:6px 12px;
    border-radius:6px;
    cursor:pointer;
    font-size:12px;
  }
  @keyframes fadeIn{
    from{opacity:0;transform:scale(.95);}
    to{opacity:1;transform:scale(1);}
  }
</style>
</head>
<body>

<div class="container">
  <h2>Create Account</h2>
  <p style="text-align:center;font-size:14px;color:#aaa;">Powered by Reyn Tech</p>

  <label>Username:</label>
  <input type="text" id="username" placeholder="Masukkan username" required/>

  <label>Password:</label>
  <input type="password" id="password" placeholder="Masukkan password" required/>

  <label>Durasi (Hari):</label>
  <input type="number" id="duration" placeholder="Contoh: 30 hari" min="1" max="365" required/>

  <button onclick="createAccount()">Buat Akun</button>

  <div class="accounts-list">
    <h3 style="color:#ff073a;margin-bottom:15px;">Akun Tersimpan:</h3>
    <div id="accountsList"></div>
  </div>
</div>

<script>
// Load accounts from localStorage
let accounts = JSON.parse(localStorage.getItem('accounts')) || [];

function displayAccounts() {
  const list = document.getElementById('accountsList');
  if (accounts.length === 0) {
    list.innerHTML = '<p style="color:#666;text-align:center;">Belum ada akun</p>';
    return;
  }
  
  const now = new Date();
  
  list.innerHTML = accounts.map((acc, i) => {
    const expireDate = new Date(acc.expireDate);
    const isExpired = now > expireDate;
    const daysLeft = Math.ceil((expireDate - now) / (1000 * 60 * 60 * 24));
    
    return `
      <div class="account-item ${isExpired ? 'expired' : ''}">
        <div class="account-header">
          <div class="account-info">
            <strong>${acc.username}</strong>
            <span class="status ${isExpired ? 'expired' : 'active'}">
              ${isExpired ? 'EXPIRED' : 'AKTIF'}
            </span>
          </div>
          <div>
            ${!isExpired ? `<button class="extend-btn" onclick="extendAccount(${i})">Perpanjang</button>` : ''}
            <button class="delete-btn" onclick="deleteAccount(${i})">Hapus</button>
          </div>
        </div>
        <div style="font-size:12px;color:#aaa;">
          <div>üìÖ Dibuat: ${acc.createdDate}</div>
          <div>‚è∞ Expired: ${expireDate.toLocaleDateString('id-ID')} 
            ${isExpired ? '‚ùå' : `(${daysLeft} hari lagi) ‚úÖ`}
          </div>
          <div>üìä Durasi Awal: ${acc.duration} hari</div>
        </div>
      </div>
    `;
  }).join('');
}

async function createAccount() {
  const username = document.getElementById('username').value.trim();
  const password = document.getElementById('password').value.trim();
  const duration = parseInt(document.getElementById('duration').value);

  // Validasi input
  if (!username || !password || !duration) {
    alert('‚ùå Lengkapi semua field termasuk durasi!');
    return;
  }

  if (duration < 1 || duration > 365) {
    alert('‚ùå Durasi harus antara 1-365 hari!');
    return;
  }

  // Cek username sudah ada
  if (accounts.some(acc => acc.username === username)) {
    alert('‚ùå Username sudah digunakan!');
    return;
  }

  // Hitung tanggal expire berdasarkan durasi yang diinput
  const now = new Date();
  const expireDate = new Date(now.getTime() + (duration * 24 * 60 * 60 * 1000));

  // Buat akun baru
  const newAccount = {
    username: username,
    password: password,
    duration: duration,
    createdDate: now.toLocaleDateString('id-ID') + ' ' + now.toLocaleTimeString('id-ID'),
    expireDate: expireDate.toISOString()
  };

  // Simpan ke array dan localStorage
  accounts.push(newAccount);
  localStorage.setItem('accounts', JSON.stringify(accounts));
  
  // Simulasi menyimpan ke GitHub
  await saveToGitHub(newAccount);

  // Reset form
  document.getElementById('username').value = '';
  document.getElementById('password').value = '';
  document.getElementById('duration').value = '';
  
  // Update tampilan
  displayAccounts();
  
  alert(`‚úÖ Akun berhasil dibuat!\nüë§ Username: ${username}\nüìÖ Berlaku sampai: ${expireDate.toLocaleDateString('id-ID')}\n‚è±Ô∏è Durasi: ${duration} hari`);
}

function extendAccount(index) {
  const days = prompt('Tambah berapa hari lagi?', '30');
  if (!days || isNaN(days) || days < 1) {
    alert('‚ùå Masukkan jumlah hari yang valid!');
    return;
  }
  
  const account = accounts[index];
  const currentExpire = new Date(account.expireDate);
  const newExpire = new Date(currentExpire.getTime() + (parseInt(days) * 24 * 60 * 60 * 1000));
  
  accounts[index].expireDate = newExpire.toISOString();
  accounts[index].duration += parseInt(days);
  
  localStorage.setItem('accounts', JSON.stringify(accounts));
  displayAccounts();
  
  alert(`‚úÖ Akun ${account.username} diperpanjang!\nüìÖ Berlaku sampai: ${newExpire.toLocaleDateString('id-ID')}\n‚ûï Ditambah: ${days} hari`);
}

function deleteAccount(index) {
  const account = accounts[index];
  if (confirm(`Yakin hapus akun "${account.username}"?`)) {
    accounts.splice(index, 1);
    localStorage.setItem('accounts', JSON.stringify(accounts));
    displayAccounts();
    alert('‚úÖ Akun berhasil dihapus!');
  }
}

// Function untuk cek login (bisa digunakan untuk sistem login)
function checkLogin(username, password) {
  const account = accounts.find(acc => acc.username === username && acc.password === password);
  
  if (!account) {
    return { success: false, message: '‚ùå Username atau password salah!' };
  }
  
  const now = new Date();
  const expireDate = new Date(account.expireDate);
  
  if (now > expireDate) {
    return { success: false, message: '‚ùå Akun sudah expired! Hubungi admin untuk perpanjangan.' };
  }
  
  const daysLeft = Math.ceil((expireDate - now) / (1000 * 60 * 60 * 24));
  return { 
    success: true, 
    message: `‚úÖ Login berhasil! Akun berlaku ${daysLeft} hari lagi.`, 
    account: account,
    daysLeft: daysLeft
  };
}

async function saveToGitHub(account) {
  // Simulasi menyimpan ke GitHub - ganti dengan GitHub API sesungguhnya
  console.log('üì§ Menyimpan ke GitHub:', account);
  
  // Simulasi delay upload
  await new Promise(resolve => setTimeout(resolve, 500));
  
  console.log('‚úÖ Berhasil disimpan ke GitHub!');
}

// Initialize app saat halaman dimuat
initApp();

// Auto-refresh untuk update status expired setiap menit
setInterval(displayAccounts, 60000);
</script>
</body>
</html>
